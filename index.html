<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DCM YES School - Advanced FAQ Chatbot</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Base styles & Custom theme colors */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
        }
        .text-theme-dark { color: #333333; }
        .text-theme-blue { color: #2c7cbd; }
        .bg-gradient-red { background: linear-gradient(to right, #e51f17, #c01a14); }
        .bg-gradient-blue { background: linear-gradient(to right, #2c7cbd, #225f92); }
        .bg-theme-yellow { background: linear-gradient(to right, #f8cc18, #f8d844); }
        .border-theme-yellow { border-color: #f8cc18; }
        
        .font-playfair { font-family: 'Playfair Display', serif; }

        /* Main container styling and entrance animation */
        .chat-container-animate {
            animation: containerFadeIn 0.8s ease-out forwards;
        }

        @keyframes containerFadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Header Styling */
        header {
            border-top-left-radius: 0;
            border-top-right-radius: 0;
            padding: 1rem 1.25rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        /* Chat bubble styles */
        .chat-bubble {
            max-width: 85%;
            padding: 12px 16px;
            border-radius: 18px;
            margin-bottom: 10px;
            word-wrap: break-word;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInSlideUp 0.5s forwards ease-out;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .bot-bubble {
            background-color: #e9e9eb;
            color: #333333;
            border-bottom-left-radius: 6px;
            align-self: flex-start;
            position: relative;
            padding-right: 40px;
        }
        .user-bubble {
            background: linear-gradient(to right, #2c7cbd, #225f92);
            color: #ffffff;
            border-bottom-right-radius: 6px;
            align-self: flex-end;
            text-align: right;
        }

        /* Message text content within bubbles */
        .message-text-content {
            flex-grow: 1;
            text-align: left;
        }

        .user-bubble .message-text-content {
            text-align: right;
        }

        /* Time stamp */
        .timestamp {
            font-size: 0.7rem;
            opacity: 0.8;
            align-self: flex-end;
        }
        .bot-bubble .timestamp {
            align-self: flex-start;
        }

        /* Keyframe animation for messages */
        @keyframes fadeInSlideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Options slider styles */
        #options-container {
            border-bottom-left-radius: 0;
            border-bottom-right-radius: 0;
            padding: 15px 10px;
            background-color: #f9f9f9;
            border-top: 1px solid #e9e9e9;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #options-wrapper {
            display: flex;
            overflow-x: hidden;
            padding: 0 5px;
            flex-grow: 1;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
        }

        .option-button {
            flex: 0 0 auto;
            margin: 0 6px;
            padding: 10px 18px;
            background-color: #ffffff;
            color: #4a4a4a;
            border: 1px solid #e0e0e0;
            border-radius: 25px;
            font-weight: 500;
            white-space: nowrap;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.08);
            opacity: 0;
            transform: translateY(10px);
            animation: optionFadeIn 0.3s forwards ease-out;
            font-size: 0.9rem;
        }
        .option-button:hover {
            background: linear-gradient(to right, #f8cc18, #f8d844);
            color: #333333;
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 0 12px rgba(0,0,0,0.15);
            border-color: #f8cc18;
        }
        .option-button:active {
            transform: translateY(0) scale(0.98);
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .option-button:first-child { margin-left: 0; }
        .option-button:last-child { margin-right: 0; }

        .website-button {
            background: linear-gradient(to right, #2c7cbd, #225f92);
            color: white;
            font-weight: 600;
            border: 1px solid #225f92;
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
            margin: 0 6px;
        }
        .website-button:hover {
            background: linear-gradient(to right, #225f92, #1d4d77);
            color: white;
            border-color: #1d4d77;
        }

        @keyframes optionFadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Scrollbar styling for chat window */
        #chat-window::-webkit-scrollbar { width: 8px; }
        #chat-window::-webkit-scrollbar-track { background: #f0f0f0; }
        #chat-window::-webkit-scrollbar-thumb { background: #bdbdbd; border-radius: 8px; }
        #chat-window::-webkit-scrollbar-thumb:hover { background: #a0a0a0; }

        /* Typing indicator */
        .typing-indicator {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            margin-bottom: 10px;
            padding: 12px 16px;
            border-radius: 18px;
            background-color: #e9e9eb;
            color: #333333;
            border-bottom-left-radius: 6px;
            max-width: 80px;
            animation: fadeIn 0.3s ease-out;
        }

        .typing-indicator span {
            display: inline-block;
            width: 8px;
            height: 8px;
            background-color: #999;
            border-radius: 50%;
            margin: 0 2px;
            animation: bounce 1.4s infinite ease-in-out both;
        }

        .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
        .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }
        .typing-indicator span:nth-child(3) { animation-delay: 0s; }

        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Speaker icon styles within bot messages */
        .bot-bubble .speaker-icon {
            position: absolute;
            right: 12px;
            bottom: 10px;
            cursor: pointer;
            color: #888;
            font-size: 0.9em;
            transition: color 0.2s ease-in-out, transform 0.2s ease;
        }
        .bot-bubble .speaker-icon:hover {
            color: #2c7cbd;
            transform: scale(1.1);
        }
        .bot-bubble .speaker-icon:active {
            transform: scale(0.95);
        }

        /* Clear Chat button styling */
        #clear-chat-button {
            background: linear-gradient(to right, #e51f17, #c01a14);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.85em;
            margin-left: 15px;
            flex-shrink: 0;
            transition: background 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
            font-weight: 500;
        }

        #clear-chat-button:hover {
            background: linear-gradient(to right, #c01a14, #a01410);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.25);
        }
        #clear-chat-button:active {
            transform: translateY(0);
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        /* New Stop/Pause Reading button styling */
        #stop-reading-button {
            background: linear-gradient(to right, #d32f2f, #b71c1c);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.85em;
            margin-left: 15px;
            flex-shrink: 0;
            transition: background 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
            font-weight: 500;
            display: none; /* Initially hidden */
        }
        
        #stop-reading-button:hover {
            background: linear-gradient(to right, #b71c1c, #9a0c0c);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.25);
        }
        #stop-reading-button:active {
            transform: translateY(0);
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        /* Adjust header to accommodate the button */
        header > div:first-child {
            display: flex;
            align-items: center;
        }

        /* Arrow Button Styles */
        .scroll-arrow {
            background: linear-gradient(to right, #f8cc18, #f8d844);
            color: #333333;
            border: none;
            border-radius: 50%;
            width: 38px;
            height: 38px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1em;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.2s ease;
            flex-shrink: 0;
            margin: 0 5px;
        }

        .scroll-arrow:hover {
            background: linear-gradient(to right, #f8d844, #f9e26e);
            transform: scale(1.08);
            box-shadow: 0 4px 12px rgba(0,0,0,0.25);
        }

        .scroll-arrow:active {
            transform: scale(0.95);
            box-shadow: 0 1px 4px rgba(0,0,0,0.1);
        }

        .scroll-arrow.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
            background: #e0e0e0;
            color: #999999;
        }

        /* Style for the logo link to prevent underline and add hover */
        .logo-link {
            text-decoration: none;
            color: inherit;
            cursor: pointer;
            display: flex;
            align-items: center;
            transition: transform 0.2s ease;
        }

        .logo-link:hover { transform: scale(1.01); }
        .logo-link:active { transform: scale(0.99); }

        .logo-link .w-14 {
            transition: background-color 0.2s ease, transform 0.2s ease;
        }
        .logo-link:hover .w-14 {
            background-color: #f5f5f5;
            transform: rotate(3deg);
        }
        
        /* Tab styles now in the header */
        .tab-button-header {
            padding: 10px 20px;
            font-weight: 600;
            font-size: 0.9rem;
            color: #ffcccc;
            border: none;
            background-color: transparent;
            cursor: pointer;
            position: relative;
            transition: color 0.3s ease;
            display: inline-block;
        }
        .tab-button-header::after {
            content: '';
            position: absolute;
            left: 50%;
            bottom: -8px;
            transform: translateX(-50%) scaleX(0);
            width: 80%;
            height: 2px;
            background-color: white;
            transition: transform 0.3s ease;
        }
        .tab-button-header.active {
            color: white;
        }
        .tab-button-header.active::after {
            transform: translateX(-50%) scaleX(1);
        }
        .tab-button-header:hover:not(.active) {
            color: #ffeaea;
        }

        /* New FAQ container styles */
        #faq-container {
            display: none;
            padding: 1.5rem;
            overflow-y: auto;
            animation: fadeIn 0.5s ease-out forwards;
        }

        .faq-section {
            margin-bottom: 2.5rem;
            background: linear-gradient(145deg, #f0f2f5, #ffffff);
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border-left: 5px solid #e51f17;
            animation: slideInUp 0.6s ease-out forwards;
            opacity: 0;
            position: relative;
        }
        .faq-section:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        .faq-section:nth-child(even) { border-left-color: #2c7cbd; }
        .faq-section:nth-child(2) { animation-delay: 0.1s; }
        .faq-section:nth-child(3) { animation-delay: 0.2s; }
        .faq-section:nth-child(4) { animation-delay: 0.3s; }
        .faq-section:nth-child(5) { animation-delay: 0.4s; }
        .faq-section:nth-child(6) { animation-delay: 0.5s; }


        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .faq-section h2 {
            font-size: 1.8rem;
            font-weight: 700;
            color: #c01a14;
            margin-bottom: 0.75rem;
            font-family: 'Playfair Display', serif;
            position: relative;
            padding-right: 60px; /* Make space for the button */
        }
        .faq-section:nth-child(even) h2 {
            color: #225f92;
        }
        .faq-content-container {
            line-height: 1.7;
            color: #4a4a4a;
            font-weight: 400;
        }

        .faq-content-container p, .faq-content-container ul {
            margin-bottom: 1rem;
        }
        .faq-content-container ul {
            list-style-type: '👉';
            padding-left: 20px;
        }
        .faq-content-container li {
            margin-bottom: 0.5rem;
            color: #555555;
            padding-left: 5px;
        }
        .faq-content-container li strong {
            color: #333333;
        }
        
        /* New styling for the Read button in FAQs */
        .faq-read-btn {
            position: absolute;
            top: 2rem;
            right: 2rem;
            background: linear-gradient(to right, #2c7cbd, #225f92);
            color: white;
            padding: 8px 16px;
            border-radius: 25px;
            font-size: 0.9em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }
        .faq-read-btn:hover {
            background: linear-gradient(to right, #225f92, #1d4d77);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.25);
        }
        .faq-read-btn:active {
            transform: translateY(0);
            box-shadow: 0 1px 4px rgba(0,0,0,0.1);
        }
        .faq-read-btn.stop {
            background: linear-gradient(to right, #d32f2f, #b71c1c);
        }
        .faq-read-btn.stop:hover {
            background: linear-gradient(to right, #b71c1c, #9a0c0c);
        }

        /* Media Queries for Responsiveness */
        @media (max-width: 600px) {
            body { padding: 0; }
            .main-app-wrapper {
                height: 100vh;
                border-radius: 0;
                max-width: 100%;
                max-height: 100vh;
                box-shadow: none;
            }
            header {
                border-radius: 0;
                flex-direction: column;
                align-items: flex-start;
                padding-bottom: 0;
            }
            header > div:first-child {
                flex-grow: 1;
            }
            .header-tabs {
                width: 100%;
                display: flex;
                justify-content: space-around;
                background-color: rgba(255,255,255,0.1);
                margin-top: 10px;
                padding: 5px 0;
            }
            .tab-button-header {
                font-size: 0.8rem;
                flex-grow: 1;
                text-align: center;
                padding: 10px 0;
            }
            #options-container {
                border-radius: 0;
                padding: 10px 5px;
            }
            .chat-bubble { max-width: 90%; }
            .option-button {
                padding: 8px 12px;
                font-size: 0.8rem;
                margin: 0 4px;
            }
            .scroll-arrow {
                width: 32px;
                height: 32px;
                font-size: 0.9em;
            }
            #clear-chat-button {
                padding: 6px 10px;
                font-size: 0.8em;
            }
            #faq-container { padding: 1rem; }
            .faq-section h2 { font-size: 1.5rem; padding-right: 40px; }
            .faq-section { padding: 1.5rem; }
            .faq-read-btn {
                top: 1.5rem;
                right: 1.5rem;
                padding: 6px 12px;
                font-size: 0.8em;
            }
        }
    </style>
</head>
<body class="bg-white flex items-center justify-center min-h-screen p-0 m-0">
    <!-- Main wrapper for the entire application -->
    <div class="w-full h-screen max-w-none max-h-none flex flex-col bg-white overflow-hidden main-app-wrapper rounded-xl shadow-lg">

        <!-- Header containing logo and tabs -->
        <header class="bg-gradient-red text-white p-4 flex items-center shadow-md z-10">
            <div class="flex items-center">
                <a href="https://dcmyesschool.com" target="_blank" class="logo-link" aria-label="Visit DCM YES School Website">
                    <div class="w-14 h-14 bg-white rounded-full flex items-center justify-center mr-4 flex-shrink-0">
                        <img src="logo.png" alt="DCM YES School Logo - Click to visit website" class="w-10 h-10 object-contain" onerror="this.onerror=null;this.src='https://placehold.co/40x40/ffffff/e51f17?text=DCM+Logo';">
                    </div>
                    <div>
                        <h1 class="text-xl font-bold">DCM YES School</h1>
                        <p id="greeting-text" class="text-sm opacity-90">How can I help you today?</p>
                    </div>
                </a>
            </div>
            
            <div class="header-tabs flex items-center">
                <button id="tab-ai-chat" class="tab-button-header active">AI Chat</button>
                <button id="tab-faqs" class="tab-button-header">FAQs</button>
                <button id="clear-chat-button" class="ml-4" aria-label="Clear Chat History">Clear Chat</button>
                <button id="stop-reading-button" aria-label="Stop Reading Aloud">Stop Reading</button>
            </div>
        </header>

        <!-- AI Chat Container -->
        <div id="ai-chat-container" class="w-full h-full flex flex-col bg-white overflow-hidden chat-container-animate">
            <main id="chat-window" class="flex-1 p-4 md:p-6 overflow-y-auto" role="log" aria-live="polite" aria-atomic="false">
                <div id="date-display" class="text-center text-gray-500 text-sm mb-4"></div>
                <div id="message-container" class="flex flex-col space-y-4"></div>
            </main>

            <footer id="options-container" class="p-4 border-t border-gray-200 bg-gray-50 overflow-hidden flex items-center justify-content-center">
                <button id="scroll-left-btn" class="scroll-arrow mr-2" aria-label="Scroll options left"><i class="fas fa-chevron-left"></i></button>
                <div id="options-wrapper" class="flex-1 overflow-x-hidden" role="group" aria-label="Available questions"></div>
                <button id="scroll-right-btn" class="scroll-arrow ml-2" aria-label="Scroll options right"><i class="fas fa-chevron-right"></i></button>
            </footer>
        </div>

        <!-- FAQs Container (initially hidden) -->
        <div id="faq-container" class="w-full h-full overflow-y-auto">
            <!-- FAQ content will be dynamically generated here -->
        </div>
        
		<div style="text-align: center; padding-top: 10px; padding-bottom: 20px; font-size: 0.8em; color: #777;">
            Created by Riddhish, a 10-year-old student from Grade 6.
        </div>
    </div>

    <script>
        // --- ChatService: Simulates interaction with a backend API ---
        class ChatService {
            constructor() {
                // In a real application, this would be an actual API endpoint.
                // For demonstration, we simulate data and network delay.
                this.qaDatabase = {
                    'start': {
                        question: 'Initial prompt',
                        answer: 'Welcome to <strong>DCM YES School</strong>, a legacy in education since 1946. We are committed to fostering an environment of academic excellence and holistic development. How can we assist you today?'
                    },
                    'admissions': {
                        question: 'Admissions Info',
                        answer: 'Our admission process for the new academic year typically begins in <strong>November</strong>. For detailed information on eligibility, required documents, and key dates, please visit the <a href="https://dcmyesschool.com/contact" class="text-theme-blue font-semibold" target="_blank">admissions section on our official website</a>.',
                        followUpAnswer: 'To confirm, admissions generally start in November. All details on eligibility and forms are on the <a href="https://dcmyesschool.com/contact" class="text-theme-blue font-semibold" target="_blank">official website</a>. Please check there for the most current information.'
                    },
                    'curriculum': {
                        question: 'Our Curriculum',
                        answer: 'We proudly follow the <strong>CBSE curriculum</strong>, enriched with a bespoke curriculum for all age groups including <strong>Mother\'s Lap, CCLICK, SLITEE, and CLASSE</strong> programs. This ensures all-round development with a wide variety of co-curricular and extra-curricular activities.',
                        followUpAnswer: 'Our curriculum is a blend of <strong>CBSE</strong> and unique programs like <strong>Mother\'s Lap, CCLICK, SLITEE, and CLASSE</strong>, designed for comprehensive development. It emphasizes both academics and co-curricular learning.'
                    },
                    'facilities': {
                        question: 'Campus Facilities',
                        answer: 'Our campus boasts world-class, state-of-the-art facilities including: <ul class="list-disc list-inside mt-2"><li>Digitally networked Smart Classrooms</li><li>Ultra Modern Labs (Physics, Chemistry, Biology, Social Studies, Maths, AI/Robotics, Special Language Lab)</li><li>A Hi-tech, well-stocked Library</li><li>Spacious Sports Grounds for indoor & outdoor games (with expert coaches)</li><li>Secure Transportation Services</li><li>Kids Amusement Park with rides & animated characters</li><li>Experiential Learning Studios</li><li>Finishing & Grooming classes for girls (Etiquette Villa)</li><li>Activity Block (Meditation, Music, Art & Craft, Dance room)</li><li>Separate Computer labs for Junior & Senior wings with 24-hour high-speed Internet</li><li>Smart Boards & Conference Room</li><li>STEM (Science, Technology, Engineering and Math) labs</li><li>e-Counseling Cell & Provision for day-boarding</li><li>Special classes for competitive exams (IIT, NEET/JEE, AFMC, AIIMS, NDA, NTSE, KVPY)</li><li>Safe and secure environment with round-the-clock security</li></ul>',
                        followUpAnswer: 'In summary, our campus features modern facilities such as Smart Classrooms, a variety of advanced labs including AI and STEM, extensive sports grounds, a library, and unique offerings like our Etiquette Villa and Kids Amusement Park. We also provide secure transportation.'
                    },
                    'contact': {
                        question: 'Contact Us',
                        answer: 'You can reach us at: <br><br><strong>Landline:</strong> <a href="tel:+911613510099" class="text-theme-blue font-semibold"><strong>+91-161-3510099</strong></a><br><strong>Mobile:</strong> <a href="tel:+918728893030" class="text-theme-blue font-semibold"><strong>+91-8728893030</strong></a><br><strong>General Email:</strong> <a href="mailto:contact@dcmyesschool.com" class="text-theme-blue font-semibold">contact@dcmyesschool.com</a><br><strong>Admissions Email:</strong> <a href="mailto:admissions@dcmyesschool.com" class="text-theme-blue font-semibold">admissions@dcmyesschool.com</a><br><br>We are located at: DCM Young Entrepreneurs School, Block-B, Rajguru Nagar, Ludhiana, Punjab - 141012 (India).',
                        followUpAnswer: 'Our contact numbers are <strong>+91-161-3510099</strong> and <strong>+91-8728893030</strong>. You can email us at <a href="mailto:contact@dcmyesschool.com" class="text-theme-blue font-semibold">contact@dcmyesschool.com</a> or <a href="mailto:admissions@dcmyesschool.com" class="text-theme-blue font-semibold">admissions@dcmyesschool.com</a>. Our school is in Rajguru Nagar, Ludhiana.'
                    },
                    'about_us': {
                        question: 'About The School',
                        answer: 'DCM YES School is a premier institution in Ludhiana with <strong>75+ years of acclaimed experience</strong> since its establishment in 1946 by Late Shri M R Dass. We have proudly graduated over <strong>112,500 students</strong> and currently have <strong>20,000+ enrolled students</strong> and <strong>110+ teachers and staff</strong>. Our vision, "From Cradle to Corporate," is dedicated to nurturing young minds and preparing them for the future with a blend of traditional values and modern educational practices, focusing on innovation, entrepreneurship, and emerging technologies like AI, AR, VR, and ML.',
                        followUpAnswer: 'Founded in 1946 by Late Shri M R Dass, DCM YES School has over <strong>75 years of educational excellence</strong>. We focus on innovation and entrepreneurship, preparing students for the future with a blend of traditional and modern learning, including emerging technologies. We\'re proud of our large alumni and student community.'
                    },
                    'achievements': {
                        question: 'Our Achievements',
                        answer: 'DCM YES School stands out with unique programs and innovative environments: <ul class="list-disc list-inside mt-2"><li><strong>Dual Diplomas:</strong> Partnership with Houghton Academy, New York, USA, offering an American High School diploma alongside CBSE studies.</li><li><strong>Earn While You Learn:</strong> Internship program fostering leadership and real-world work experience.</li><li><strong>Etiquette Villa:</strong> Dedicated program for personality development, grooming, and social skills.</li><li><strong>Entrepreneurial Platform:</strong> Cultivating future leaders and innovators.</li><li><strong>Global Collaboration:</strong> Our students have participated in international forums like the World Entrepreneurship Summit, USA.</li></ul>',
                        followUpAnswer: 'Our key achievements include dual diplomas with Houghton Academy, an "Earn While You Learn" internship program, an Etiquette Villa for grooming, a platform for young entrepreneurs, and international collaborations like our participation in the World Entrepreneurship Summit.'
                    },
                    'safety_security': {
                        question: 'Safety & Security',
                        answer: 'Your child\'s safety is our highest priority. Our campus is equipped with a comprehensive, round-the-clock security system, including CCTV surveillance. We also have a dedicated team of security personnel to ensure a safe and secure environment for all students and staff.',
                        followUpAnswer: 'We maintain a high level of safety with 24/7 security, CCTV surveillance, and dedicated staff to ensure a secure environment for everyone on campus.'
                    },
                    'health_wellness': {
                        question: 'Health & Wellness',
                        answer: 'The physical and mental well-being of our students is paramount. We have a dedicated health clinic with a qualified nurse on campus to handle any medical emergencies. Regular health check-ups and wellness workshops are conducted to promote a healthy lifestyle.',
                        followUpAnswer: 'We prioritize student health with an on-campus clinic and a nurse. We also conduct regular health check-ups and workshops to promote wellness.'
                    },
                    'yespreneurship': {
                        question: 'Yespreneurship Programs',
                        answer: 'Our "Yespreneurship" program is designed to instill a spirit of entrepreneurship in our students from a young age. This initiative provides a platform for students to develop innovative business ideas, learn about market dynamics, and receive mentorship from industry experts.',
                        followUpAnswer: 'The "Yespreneurship" program is our initiative to foster entrepreneurship. Students get a platform to develop ideas, learn about business, and receive expert mentorship.'
                    },
                    'innovation': {
                        question: 'Innovation at YES',
                        answer: 'At DCM YES, innovation is at the heart of everything we do. Our curriculum integrates emerging technologies like AI, AR, VR, and ML to prepare students for the future. We encourage a culture of curiosity and creative problem-solving across all subjects.',
                        followUpAnswer: 'We are committed to innovation, integrating technologies like AI, AR, VR, and ML into our curriculum. Our goal is to foster a culture of curiosity and creative problem-solving.'
                    },
                    'sports': {
                        question: 'Sports Facilities',
                        answer: 'We believe a healthy body is as important as a healthy mind. Our school has spacious grounds for various sports like football, cricket, basketball, and athletics. We have a team of expert coaches to train students and help them excel in their chosen sport.',
                        followUpAnswer: 'Our sports facilities include large grounds for football, cricket, basketball, and athletics. We have expert coaches to help students develop their skills.'
                    },
                    'global_programs': {
                        question: 'Global Programs & Exposure',
                        answer: 'DCM YES School is a globally-minded institution. We have collaborations with international schools and our students participate in global forums and exchange programs. This exposure helps our students develop a global perspective and become world citizens.',
                        followUpAnswer: 'We offer global exposure through collaborations with international schools and participation in forums and exchange programs, helping students develop a global perspective.'
                    }
                };
                
                // An array of key-value pairs for displaying the FAQs directly.
                this.faqContent = [
                    {
                        key: 'about_us',
                        title: 'The Legacy: A Story of Excellence',
                        content: `For over 75 years, DCM YES School has been a beacon of learning in Ludhiana, shaping the futures of over 112,500 students since its founding in 1946 by Late Shri M R Dass. Our vision, "From Cradle to Corporate," is more than a motto—it's a commitment to nurturing young minds with a perfect blend of timeless values and cutting-edge educational practices. We prepare our students for a world of rapid change by focusing on innovation, entrepreneurship, and emerging technologies like AI, AR, VR, and ML.`
                    },
                    {
                        key: 'admissions',
                        title: 'Your Journey Starts Here: The Admissions Process',
                        content: `Embark on a new chapter with us! Our admission process for the upcoming academic session typically commences in the crisp month of November. To ensure you have all the necessary information—from eligibility criteria and required documents to important deadlines—we invite you to explore the dedicated <a href="https://dcmyesschool.com/contact" class="text-theme-blue font-semibold" target="_blank">admissions section on our official website</a>. We look forward to welcoming you to the DCM YES family!`
                    },
                    {
                        key: 'curriculum',
                        title: 'A World of Knowledge: Our Innovative Curriculum',
                        content: `At DCM YES, we believe in a curriculum that does more than just educate—it inspires. We follow the esteemed <strong>CBSE curriculum</strong>, but we don't stop there. We've enriched it with our own specialized programs tailored for every age group. These include our unique <strong>Mother's Lap, CCLICK, SLITEE, and CLASSE</strong> initiatives, all designed to foster holistic growth. Our students thrive in an environment rich with diverse co-curricular and extra-curricular activities, ensuring a well-rounded educational experience.`
                    },
                    {
                        key: 'facilities',
                        title: 'Modern Marvels: Facilities That Inspire',
                        content: `Our campus is a hub of innovation and learning, equipped with a wide array of state-of-the-art facilities:
                        <ul class="list-disc list-inside mt-2">
                            <li><strong>Smart Classrooms:</strong> Digitally networked for interactive learning.</li>
                            <li><strong>Ultra-Modern Labs:</strong> Specialized labs for Physics, Chemistry, Biology, Social Studies, Maths, AI/Robotics, and languages.</li>
                            <li><strong>Hi-tech Library:</strong> A treasure trove of knowledge for curious minds.</li>
                            <li><strong>Expansive Sports Grounds:</strong> Perfect for indoor and outdoor games with expert coaching.</li>
                            <li><strong>Kids Amusement Park:</strong> A fun and vibrant space with rides and animated characters.</li>
                            <li><strong>Etiquette Villa:</strong> A dedicated space for personality development and grooming.</li>
                        </ul>`
                    },
                    {
                        key: 'achievements',
                        title: 'Pioneering Pathways: Our Unique Achievements',
                        content: `We pride ourselves on programs that go beyond the ordinary:
                        <ul class="list-disc list-inside mt-2">
                            <li><strong>Dual Diplomas:</strong> A prestigious partnership with Houghton Academy, New York, USA, allowing students to earn both a CBSE and an American High School diploma.</li>
                            <li><strong>Earn While You Learn:</strong> An innovative internship program to build real-world skills and leadership qualities.</li>
                            <li><strong>Entrepreneurial Platform:</strong> A dynamic space to cultivate the next generation of innovators and business leaders.</li>
                            <li><strong>Global Collaborations:</strong> Our students have made their mark on the international stage at events like the World Entrepreneurship Summit, USA.</li>
                        </ul>`
                    },
                    {
                        key: 'contact',
                        title: 'Connect with Us',
                        content: `We're always here to help. You can reach our team through: <br><br>
                        <strong>Phone:</strong> <a href="tel:+911613510099" class="text-theme-blue font-semibold">+91-161-3510099</a><br>
                        <strong>Mobile:</strong> <a href="tel:+918728893030" class="text-theme-blue font-semibold">+91-8728893030</a><br>
                        <strong>General Email:</strong> <a href="mailto:contact@dcmyesschool.com" class="text-theme-blue font-semibold">contact@dcmyesschool.com</a><br>
                        <strong>Admissions Email:</strong> <a href="mailto:admissions@dcmyesschool.com" class="text-theme-blue font-semibold">admissions@dcmyesschool.com</a><br><br>
                        Our beautiful campus is located at: DCM Young Entrepreneurs School, Block-B, Rajguru Nagar, Ludhiana, Punjab - 141012 (India).`
                    },
                    {
                        key: 'safety_security',
                        title: 'A Safe Haven: Safety and Security',
                        content: `Your child's safety is our utmost priority. Our campus is a fortress of security, featuring a comprehensive, round-the-clock CCTV surveillance system and a vigilant team of security personnel. We are committed to providing a secure and nurturing environment where students can learn, play, and grow without a worry.`
                    },
                    {
                        key: 'health_wellness',
                        title: 'Holistic Well-Being: Health and Wellness',
                        content: `We believe that a healthy body and a healthy mind are the cornerstones of successful learning. Our school has a fully-equipped health clinic staffed by a qualified nurse, ready to handle any medical needs. We also promote a culture of wellness through regular health check-ups and engaging workshops that empower students to make healthy lifestyle choices.`
                    },
                    {
                        key: 'yespreneurship',
                        title: 'The Future is Now: Yespreneurship Programs',
                        content: `Our innovative "Yespreneurship" program is designed to spark the entrepreneurial spirit in every student. This unique platform encourages young minds to develop groundbreaking business ideas, understand the dynamics of the market, and receive invaluable mentorship from experienced industry leaders. We are building the next generation of innovators and job creators.`
                    },
                    {
                        key: 'innovation',
                        title: 'Beyond the Textbook: Innovation at YES',
                        content: `Innovation is not just a buzzword at DCM YES—it's a way of life. Our curriculum is forward-thinking, integrating cutting-edge technologies like <strong>Artificial Intelligence (AI), Augmented Reality (AR), Virtual Reality (VR), and Machine Learning (ML)</strong>. We foster an environment of curiosity, encouraging students to think creatively and solve real-world problems.`
                    },
                    {
                        key: 'sports',
                        title: 'Championing the Spirit: Sports Facilities',
                        content: `We are dedicated to the holistic development of our students, which includes physical fitness and sportsmanship. Our school boasts expansive grounds for a wide range of sports, including football, cricket, basketball, and athletics. Under the guidance of our expert coaches, students are encouraged to pursue their passions and achieve sporting excellence.`
                    },
                    {
                        key: 'global_programs',
                        title: 'World-Ready: Global Programs & Exposure',
                        content: `We prepare our students to be global citizens. Through partnerships with international schools and active participation in global forums and student exchange programs, we provide unique opportunities for cross-cultural learning. This exposure broadens their horizons and equips them with a global perspective essential for success in the modern world.`
                    }
                ];

                // The primary options shown in the chat, including the new ones and a special key for the website link
                this.primaryOptions = ['admissions', 'curriculum', 'facilities', 'contact', 'about_us', 'achievements', 'safety_security', 'health_wellness', 'yespreneurship', 'innovation', 'sports', 'global_programs', 'website'];
            }

            async getStartData() {
                // Simulate network latency
                await new Promise(resolve => setTimeout(resolve, 500));
                return {
                    message: this.qaDatabase['start'].answer,
                    options: this.primaryOptions
                };
            }
            
            async getAnswer(key) {
                // Simulate network latency
                await new Promise(resolve => setTimeout(resolve, 500));
                const response = this.qaDatabase[key];
                // Filter out the current key and the special 'website' key from follow-up questions
                const followUpQuestions = this.primaryOptions.filter(opt => opt !== key && opt !== 'website');
                return {
                    question: response.question,
                    answer: response.answer,
                    options: followUpQuestions
                };
            }

            async getFollowUpAnswer(key) {
                await new Promise(resolve => setTimeout(resolve, 500));
                const response = this.qaDatabase[key];
                // Filter out the current key and the special 'website' key from follow-up questions
                const followUpQuestions = this.primaryOptions.filter(opt => opt !== key && opt !== 'website');
                return {
                    question: response.question,
                    answer: response.followUpAnswer,
                    options: followUpQuestions
                };
            }
            
            getFaqContent() {
                return this.faqContent;
            }

            getAllPrimaryOptionKeys() {
                // Filter out the special 'website' key when retrieving all options
                return this.primaryOptions.filter(opt => opt !== 'website');
            }
        }

        // --- ChatUI: Handles all UI rendering and user interactions ---
        class ChatUI {
            constructor(chatService) {
                this.chatService = chatService;
                this.chatWindow = document.getElementById('chat-window');
                this.messageContainer = document.getElementById('message-container');
                this.optionsWrapper = document.getElementById('options-wrapper');
                this.scrollLeftBtn = document.getElementById('scroll-left-btn');
                this.scrollRightBtn = document.getElementById('scroll-right-btn');
                this.clearChatButton = document.getElementById('clear-chat-button');
                this.stopReadingButton = document.getElementById('stop-reading-button');
                this.tabAiChat = document.getElementById('tab-ai-chat');
                this.tabFaqs = document.getElementById('tab-faqs');
                this.aiChatContainer = document.getElementById('ai-chat-container');
                this.faqContainer = document.getElementById('faq-container');
                this.greetingText = document.getElementById('greeting-text');

                this.speechSynth = window.speechSynthesis;
                this.currentUtterance = null;
                this.isPaused = false;
                this.currentFaqButton = null;

                this.bindEvents();
                this.chatHistory = [];
            }

            bindEvents() {
                this.optionsWrapper.addEventListener('click', this.handleOptionClick.bind(this));
                this.scrollLeftBtn.addEventListener('click', () => this.scrollOptions(-200));
                this.scrollRightBtn.addEventListener('click', () => this.scrollOptions(200));
                this.clearChatButton.addEventListener('click', this.clearChat.bind(this));
                this.stopReadingButton.addEventListener('click', this.toggleSpeech.bind(this));
                this.optionsWrapper.addEventListener('scroll', this.updateArrowVisibility.bind(this));
                this.tabAiChat.addEventListener('click', () => this.handleTabClick('ai-chat'));
                this.tabFaqs.addEventListener('click', () => this.handleTabClick('faqs'));
            }

            handleTabClick(tab) {
                // Stop any ongoing speech before switching tabs
                this.stopSpeech();
                
                // Remove active class from both tabs
                this.tabAiChat.classList.remove('active');
                this.tabFaqs.classList.remove('active');
                
                // Hide both content containers
                this.aiChatContainer.style.display = 'none';
                this.faqContainer.style.display = 'none';

                if (tab === 'ai-chat') {
                    this.tabAiChat.classList.add('active');
                    this.aiChatContainer.style.display = 'flex';
                    this.greetingText.textContent = 'How can I help you today?';
                    this.initChat();
                } else if (tab === 'faqs') {
                    this.tabFaqs.classList.add('active');
                    this.faqContainer.style.display = 'block';
                    this.greetingText.textContent = 'From Cradle To Corporate';
                    this.renderFaqs();
                }
            }

            renderFaqs() {
                this.faqContainer.innerHTML = '';
                const faqData = this.chatService.getFaqContent();
                faqData.forEach((faq, index) => {
                    const section = document.createElement('div');
                    section.classList.add('faq-section');
                    section.style.animationDelay = `${index * 0.1}s`;

                    const title = document.createElement('h2');
                    title.textContent = faq.title;
                    title.classList.add('font-playfair');
                    
                    const contentContainer = document.createElement('div');
                    contentContainer.classList.add('faq-content-container');
                    contentContainer.innerHTML = faq.content;

                    // Create the read button
                    const readButton = document.createElement('button');
                    readButton.textContent = 'Read';
                    readButton.classList.add('faq-read-btn');
                    readButton.setAttribute('data-text', title.textContent + '. ' + contentContainer.textContent);
                    readButton.addEventListener('click', () => this.toggleFaqSpeech(readButton));

                    section.appendChild(readButton);
                    section.appendChild(title);
                    section.appendChild(contentContainer);
                    this.faqContainer.appendChild(section);
                });
            }

            // --- Chat functionality methods ---
            async addMessage(text, sender) {
                const bubble = document.createElement('div');
                bubble.classList.add('chat-bubble', sender === 'user' ? 'user-bubble' : 'bot-bubble');
                
                const content = document.createElement('div');
                content.classList.add('message-text-content');
                content.innerHTML = text;
                
                const timestamp = document.createElement('span');
                timestamp.classList.add('timestamp');
                timestamp.textContent = this.getCurrentTime();

                bubble.appendChild(content);
                bubble.appendChild(timestamp);

                if (sender === 'bot') {
                    // Create and add speaker icon for TTS
                    const speakerIcon = document.createElement('i');
                    speakerIcon.classList.add('fas', 'fa-volume-up', 'speaker-icon');
                    speakerIcon.addEventListener('click', () => this.speakText(content.textContent));
                    bubble.appendChild(speakerIcon);
                }

                this.messageContainer.appendChild(bubble);
                this.chatHistory.push({ text, sender, timestamp: timestamp.textContent });
                this.saveChat();
                this.scrollToBottom();
            }

            // Centralized speech control function
            speakText(text, button = null) {
                this.stopSpeech();
                this.currentUtterance = new SpeechSynthesisUtterance(text);
                this.currentUtterance.pitch = 1.0;
                this.currentUtterance.rate = 1.1;
                this.currentUtterance.volume = 1.0;

                this.currentUtterance.onstart = () => {
                    this.stopReadingButton.textContent = 'Pause Reading';
                    this.stopReadingButton.style.display = 'block';
                    if (button) {
                        this.currentFaqButton = button;
                        this.updateFaqButtonState(button, 'Stop');
                    }
                };

                this.currentUtterance.onend = () => {
                    this.stopReadingButton.style.display = 'none';
                    this.stopReadingButton.textContent = 'Stop Reading';
                    this.isPaused = false;
                    if (this.currentFaqButton) {
                        this.updateFaqButtonState(this.currentFaqButton, 'Read');
                        this.currentFaqButton = null;
                    }
                    this.currentUtterance = null;
                };

                this.speechSynth.speak(this.currentUtterance);
            }

            stopSpeech() {
                if (this.speechSynth.speaking) {
                    this.speechSynth.cancel();
                }
                this.stopReadingButton.style.display = 'none';
                this.stopReadingButton.textContent = 'Stop Reading';
                this.isPaused = false;
                if (this.currentFaqButton) {
                    this.updateFaqButtonState(this.currentFaqButton, 'Read');
                    this.currentFaqButton = null;
                }
                this.currentUtterance = null;
            }

            toggleSpeech() {
                if (!this.currentUtterance) {
                    this.stopSpeech();
                    return;
                }

                if (this.speechSynth.speaking && !this.isPaused) {
                    this.speechSynth.pause();
                    this.isPaused = true;
                    this.stopReadingButton.textContent = 'Resume Reading';
                } else if (this.speechSynth.speaking && this.isPaused) {
                    this.speechSynth.resume();
                    this.isPaused = false;
                    this.stopReadingButton.textContent = 'Pause Reading';
                } else {
                    this.stopSpeech();
                }
            }

            toggleFaqSpeech(button) {
                const text = button.getAttribute('data-text');
                
                // If the same FAQ is already playing, stop it.
                if (this.currentUtterance && this.currentFaqButton === button) {
                    this.stopSpeech();
                    return;
                }

                // Stop any other current speech (FAQ or chat bubble)
                this.stopSpeech();
                
                // Start speaking the new text
                this.speakText(text, button);
            }

            updateFaqButtonState(button, state) {
                const allButtons = this.faqContainer.querySelectorAll('.faq-read-btn');
                allButtons.forEach(btn => {
                    if (btn === button) {
                        btn.textContent = state;
                        if (state === 'Stop') {
                            btn.classList.add('stop');
                        } else {
                            btn.classList.remove('stop');
                        }
                    } else {
                        btn.textContent = 'Read';
                        btn.classList.remove('stop');
                    }
                });
            }

            handleOptionClick(event) {
                const button = event.target.closest('.option-button');
                if (!button || button.classList.contains('website-button')) return;

                const selectedOption = button.dataset.key;
                this.addMessage(button.textContent, 'user');
                this.clearOptions();
                this.getBotResponse(selectedOption);
            }

            async getBotResponse(key) {
                const typingIndicator = this.showTypingIndicator();
                try {
                    const response = await this.chatService.getAnswer(key);
                    this.hideTypingIndicator(typingIndicator);
                    await this.addMessage(response.answer, 'bot');
                    setTimeout(() => {
                        this.showOptions(response.options);
                    }, 300);
                } catch (error) {
                    console.error("Error fetching bot response:", error);
                    this.hideTypingIndicator(typingIndicator);
                    await this.addMessage("Sorry, I'm unable to get that information right now. Please try again later.", 'bot');
                }
            }

            showOptions(options) {
                this.clearOptions();
                // Flag to check if we are showing a special button
                let specialButtonAdded = false;

                options.forEach((key, index) => {
                    if (key === 'website') {
                        // Create a distinct button for the website link
                        const websiteButton = document.createElement('button');
                        websiteButton.classList.add('option-button', 'website-button');
                        websiteButton.innerHTML = 'Go to Website <i class="fas fa-external-link-alt ml-2"></i>';
                        websiteButton.onclick = () => window.open('https://dcmyesschool.com', '_blank');
                        websiteButton.style.animationDelay = `${index * 0.05}s`;
                        this.optionsWrapper.appendChild(websiteButton);
                        specialButtonAdded = true;
                    } else {
                        const optionData = this.chatService.qaDatabase[key];
                        if (optionData) {
                            const button = document.createElement('button');
                            button.classList.add('option-button');
                            button.textContent = optionData.question;
                            button.dataset.key = key;
                            button.style.animationDelay = `${index * 0.05}s`;
                            this.optionsWrapper.appendChild(button);
                        }
                    }
                });

                this.updateArrowVisibility();
            }

            clearOptions() {
                this.optionsWrapper.innerHTML = '';
            }

            clearChat() {
                this.stopSpeech(); // Stop any speech when clearing chat
                this.messageContainer.innerHTML = '';
                this.chatHistory = [];
                localStorage.removeItem('chatHistory');
                this.optionsWrapper.innerHTML = '';
                this.initChat();
            }

            // --- UI utility methods ---
            scrollToBottom() {
                this.chatWindow.scrollTop = this.chatWindow.scrollHeight;
            }

            getCurrentTime() {
                const now = new Date();
                const hours = now.getHours().toString().padStart(2, '0');
                const minutes = now.getMinutes().toString().padStart(2, '0');
                return `${hours}:${minutes}`;
            }

            showTypingIndicator() {
                const indicator = document.createElement('div');
                indicator.classList.add('typing-indicator', 'bot-bubble');
                indicator.innerHTML = '<span></span><span></span><span></span>';
                this.messageContainer.appendChild(indicator);
                this.scrollToBottom();
                return indicator;
            }

            hideTypingIndicator(indicator) {
                if (indicator) {
                    indicator.remove();
                }
            }
            
            scrollOptions(amount) {
                this.optionsWrapper.scrollLeft += amount;
            }

            updateArrowVisibility() {
                const { scrollLeft, scrollWidth, clientWidth } = this.optionsWrapper;
                this.scrollLeftBtn.classList.toggle('disabled', scrollLeft === 0);
                this.scrollRightBtn.classList.toggle('disabled', scrollLeft + clientWidth >= scrollWidth);
            }

            // --- Local storage for chat history ---
            saveChat() {
                localStorage.setItem('chatHistory', JSON.stringify(this.chatHistory));
            }

            loadChat() {
                const history = localStorage.getItem('chatHistory');
                if (history) {
                    this.chatHistory = JSON.parse(history);
                    this.chatHistory.forEach(msg => {
                        const bubble = document.createElement('div');
                        bubble.classList.add('chat-bubble', msg.sender === 'user' ? 'user-bubble' : 'bot-bubble');
                        bubble.style.opacity = '1';
                        bubble.style.transform = 'translateY(0)';
                        
                        const content = document.createElement('div');
                        content.classList.add('message-text-content');
                        content.innerHTML = msg.text;

                        const timestamp = document.createElement('span');
                        timestamp.classList.add('timestamp');
                        timestamp.textContent = msg.timestamp;

                        bubble.appendChild(content);
                        bubble.appendChild(timestamp);

                        if (msg.sender === 'bot') {
                            const speakerIcon = document.createElement('i');
                            speakerIcon.classList.add('fas', 'fa-volume-up', 'speaker-icon');
                            speakerIcon.addEventListener('click', () => this.speakText(content.textContent));
                            bubble.appendChild(speakerIcon);
                        }

                        this.messageContainer.appendChild(bubble);
                    });
                    this.scrollToBottom();
                    return true;
                }
                return false;
            }

            async initChat() {
                // Check if chat history exists and has messages
                const history = localStorage.getItem('chatHistory');
                const chatHistoryExists = history && JSON.parse(history).length > 0;

                this.clearOptions();
                
                if (chatHistoryExists) {
                    // If history exists, just load it and show options
                    this.loadChat();
                    // Pass the complete list of options including the 'website' key
                    this.showOptions(this.chatService.primaryOptions);
                } else {
                    // If no history, show the welcome message for the first time
                    const typingIndicator = this.showTypingIndicator();
                    try {
                        const startData = await this.chatService.getStartData();
                        this.hideTypingIndicator(typingIndicator);
                        await this.addMessage(startData.message, 'bot');
                        setTimeout(() => {
                            this.showOptions(startData.options);
                        }, 300);
                    } catch (error) {
                        console.error("Error fetching start data:", error);
                        this.hideTypingIndicator(typingIndicator);
                        await this.addMessage("Welcome! I'm currently experiencing some issues. Please try again later.", 'bot');
                    }
                }
                this.updateArrowVisibility();
            }
        }

        // --- Application Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            const chatService = new ChatService();
            const chatUI = new ChatUI(chatService);
            // Start the chat by default when the AI Chat tab is active
            chatUI.handleTabClick('ai-chat');
        });
    </script>
</body>
</html>
